# ğŸ“‹ MLX DeepSeek-OCR å®‰è£æ­¥é©Ÿèˆ‡ä¾è³´æª¢æŸ¥å ±å‘Š

## ğŸŒ³ å®‰è£æ­¥é©Ÿæ¨¹ç‹€åœ–

```
MLX DeepSeek-OCR å®‰è£æµç¨‹
â”‚
â”œâ”€â”€ 1ï¸âƒ£ ç’°å¢ƒæº–å‚™
â”‚   â”œâ”€â”€ 1.1 æª¢æŸ¥ç³»çµ±è¦æ±‚
â”‚   â”‚   â”œâ”€â”€ macOS (Apple Silicon æ¨è–¦)
â”‚   â”‚   â”œâ”€â”€ Python 3.11+ 
â”‚   â”‚   â””â”€â”€ è‡³å°‘ 4GB å¯ç”¨è¨˜æ†¶é«”
â”‚   â”‚
â”‚   â””â”€â”€ 1.2 æª¢æŸ¥ Python ç‰ˆæœ¬
â”‚       â””â”€â”€ åŸ·è¡Œ: python3 --version
â”‚
â”œâ”€â”€ 2ï¸âƒ£ é …ç›®è¨­ç½®
â”‚   â”œâ”€â”€ 2.1 é€²å…¥é …ç›®ç›®éŒ„
â”‚   â”‚   â””â”€â”€ cd /Users/jianjunneng/1118TESTinsatll/FLASKAPP
â”‚   â”‚
â”‚   â””â”€â”€ 2.2 å‰µå»ºè™›æ“¬ç’°å¢ƒï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
â”‚       â”œâ”€â”€ python3 -m venv venv
â”‚       â””â”€â”€ source venv/bin/activate
â”‚
â”œâ”€â”€ 3ï¸âƒ£ ä¾è³´å®‰è£
â”‚   â”œâ”€â”€ 3.1 æª¢æŸ¥ requirements.txt
â”‚   â”‚   â””â”€â”€ ç¢ºèªæ‰€æœ‰ä¾è³´é …å·²åˆ—å‡º
â”‚   â”‚
â”‚   â”œâ”€â”€ 3.2 å®‰è£ä¾è³´
â”‚   â”‚   â””â”€â”€ pip install -r requirements.txt
â”‚   â”‚
â”‚   â””â”€â”€ 3.3 é©—è­‰å®‰è£
â”‚       â”œâ”€â”€ python3 -c "import flask"
â”‚       â”œâ”€â”€ python3 -c "import mlx_vlm"
â”‚       â”œâ”€â”€ python3 -c "from PIL import Image"
â”‚       â”œâ”€â”€ python3 -c "import fitz"
â”‚       â”œâ”€â”€ python3 -c "import cv2"
â”‚       â””â”€â”€ python3 -c "import numpy"
â”‚
â”œâ”€â”€ 4ï¸âƒ£ å•Ÿå‹•æ‡‰ç”¨
â”‚   â”œâ”€â”€ æ–¹æ³• A: ä½¿ç”¨å•Ÿå‹•è…³æœ¬ï¼ˆæ¨è–¦ï¼‰
â”‚   â”‚   â”œâ”€â”€ ./start.sh
â”‚   â”‚   â””â”€â”€ æˆ–: ./startback.sh
â”‚   â”‚
â”‚   â””â”€â”€ æ–¹æ³• B: æ‰‹å‹•å•Ÿå‹•
â”‚       â””â”€â”€ python3 app.py
â”‚
â””â”€â”€ 5ï¸âƒ£ é©—è­‰é‹è¡Œ
    â”œâ”€â”€ 5.1 æª¢æŸ¥æœå‹™ç‹€æ…‹
    â”‚   â””â”€â”€ curl http://localhost:5000/api/status
    â”‚
    â””â”€â”€ 5.2 è¨ªå• Web ç•Œé¢
        â””â”€â”€ http://localhost:5000
```

## ğŸ“¦ ä¾è³´é …æª¢æŸ¥å ±å‘Š

### âœ… å·²åŒ…å«åœ¨ requirements.txt çš„ä¾è³´

| ä¾è³´é … | ç‰ˆæœ¬ | ç‹€æ…‹ | ç”¨é€” |
|--------|------|------|------|
| Flask | 3.0.0 | âœ… å·²åŒ…å« | Web æ¡†æ¶ |
| mlx-vlm | 0.3.5 | âœ… å·²åŒ…å« | MLX Vision-Language æ¨¡å‹ |
| mlx | >=0.20.0 | âœ… å·²åŒ…å« | MLX æ ¸å¿ƒåº« |
| Pillow | >=10.3.0 | âœ… å·²åŒ…å« | åœ–åƒè™•ç† (PIL) |
| Werkzeug | 3.0.1 | âœ… å·²åŒ…å« | WSGI å·¥å…·åº« |
| PyMuPDF | (ç„¡ç‰ˆæœ¬) | âœ… å·²åŒ…å« | PDF è™•ç† (fitz) |

### âŒ ç¼ºå¤±çš„ä¾è³´é …

| ä¾è³´é … | åœ¨ä»£ç¢¼ä¸­çš„ä½¿ç”¨ | å»ºè­°ç‰ˆæœ¬ | ç‹€æ…‹ |
|--------|---------------|---------|------|
| **opencv-python** | `import cv2` (ç¬¬28è¡Œ) | >=4.8.0 | âŒ **ç¼ºå¤±** |
| **numpy** | `import numpy as np` (ç¬¬29è¡Œ) | >=1.24.0 | âŒ **ç¼ºå¤±** |

### âš ï¸ requirements.txt å•é¡Œ

1. **é‡è¤‡é …**ï¼š
   - Flask==3.0.0 (å‡ºç¾2æ¬¡)
   - mlx-vlm==0.3.5 (å‡ºç¾2æ¬¡)
   - mlx>=0.20.0 (å‡ºç¾2æ¬¡)
   - Pillow>=10.3.0 (å‡ºç¾2æ¬¡)
   - Werkzeug==3.0.1 (å‡ºç¾2æ¬¡)

2. **ç‰ˆæœ¬è¦ç¯„ä¸ä¸€è‡´**ï¼š
   - éƒ¨åˆ†ä½¿ç”¨ `==` (ç²¾ç¢ºç‰ˆæœ¬)
   - éƒ¨åˆ†ä½¿ç”¨ `>=` (æœ€ä½ç‰ˆæœ¬)

## ğŸ”§ å»ºè­°çš„ requirements.txt ä¿®æ­£

### ä¿®æ­£å¾Œçš„ requirements.txt æ‡‰åŒ…å«ï¼š

```txt
# Web æ¡†æ¶
Flask==3.0.0
Werkzeug==3.0.1

# MLX ç›¸é—œ
mlx>=0.20.0
mlx-vlm==0.3.5

# åœ–åƒè™•ç†
Pillow>=10.3.0
opencv-python>=4.8.0
numpy>=1.24.0

# PDF è™•ç†
PyMuPDF>=1.23.0
```

## ğŸ“ å®‰è£æ­¥é©Ÿè©³ç´°èªªæ˜

### æ­¥é©Ÿ 1: ç’°å¢ƒæº–å‚™

```bash
# æª¢æŸ¥ Python ç‰ˆæœ¬ï¼ˆéœ€è¦ 3.11+ï¼‰
python3 --version

# æª¢æŸ¥ç³»çµ±ï¼ˆmacOS æ¨è–¦ï¼‰
uname -a
```

### æ­¥é©Ÿ 2: é …ç›®è¨­ç½®

```bash
# é€²å…¥é …ç›®ç›®éŒ„
cd /Users/jianjunneng/1118TESTinsatll/FLASKAPP

# å‰µå»ºè™›æ“¬ç’°å¢ƒï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
python3 -m venv venv

# æ¿€æ´»è™›æ“¬ç’°å¢ƒ
source venv/bin/activate
```

### æ­¥é©Ÿ 3: å®‰è£ä¾è³´

```bash
# å®‰è£æ‰€æœ‰ä¾è³´
pip install -r requirements.txt

# æˆ–æ‰‹å‹•å®‰è£ç¼ºå¤±çš„ä¾è³´
pip install opencv-python>=4.8.0 numpy>=1.24.0
```

### æ­¥é©Ÿ 4: é©—è­‰å®‰è£

```bash
# æª¢æŸ¥é—œéµä¾è³´
python3 -c "import flask; print('Flask OK')"
python3 -c "import mlx_vlm; print('MLX-VLM OK')"
python3 -c "from PIL import Image; print('Pillow OK')"
python3 -c "import fitz; print('PyMuPDF OK')"
python3 -c "import cv2; print('OpenCV OK')"
python3 -c "import numpy; print('NumPy OK')"
```

### æ­¥é©Ÿ 5: å•Ÿå‹•æ‡‰ç”¨

```bash
# æ–¹æ³• 1: ä½¿ç”¨å•Ÿå‹•è…³æœ¬ï¼ˆæ¨è–¦ï¼‰
./start.sh

# æ–¹æ³• 2: æ‰‹å‹•å•Ÿå‹•
python3 app.py
```

## ğŸš¨ é‡è¦æ³¨æ„äº‹é …

1. **MLX æ¡†æ¶é™åˆ¶**ï¼š
   - MLX å°ˆç‚º macOS Apple Silicon è¨­è¨ˆ
   - éœ€è¦ Metal å¾Œç«¯æ”¯æŒ
   - Docker åœ¨ macOS ä¸Šç„¡æ³•ä½¿ç”¨ Metal GPU

2. **é¦–æ¬¡ä½¿ç”¨**ï¼š
   - é¦–æ¬¡ä¸Šå‚³åœ–ç‰‡æ™‚æœƒè‡ªå‹•ä¸‹è¼‰æ¨¡å‹ï¼ˆ~800MBï¼‰
   - éœ€è¦ç­‰å¾… 5-15 åˆ†é˜
   - æ¨¡å‹æœƒä¸‹è¼‰åˆ° `~/.cache/huggingface/hub/`

3. **è¨˜æ†¶é«”éœ€æ±‚**ï¼š
   - æ¨¡å‹åŠ è¼‰å¾Œå ç”¨ç´„ 2-3GB è¨˜æ†¶é«”
   - ç¢ºä¿ç³»çµ±æœ‰è¶³å¤ å¯ç”¨è¨˜æ†¶é«”

4. **CPU æ¨¡å¼**ï¼š
   - ç•¶å‰é…ç½®ç‚º CPU æ¨¡å¼ï¼ˆ`MLX_USE_CPU=1`ï¼‰
   - æ€§èƒ½æœƒæ¯” GPU æ¨¡å¼æ…¢ï¼Œä½†æ›´ç©©å®š

## ğŸ“Š ä¾è³´é …å®Œæ•´æ¸…å–®

### æ ¸å¿ƒä¾è³´ï¼ˆå¿…é ˆï¼‰
- Flask==3.0.0
- Werkzeug==3.0.1
- mlx>=0.20.0
- mlx-vlm==0.3.5

### åœ–åƒè™•ç†ä¾è³´ï¼ˆå¿…é ˆï¼‰
- Pillow>=10.3.0
- opencv-python>=4.8.0 âš ï¸ **ç¼ºå¤±**
- numpy>=1.24.0 âš ï¸ **ç¼ºå¤±**

### PDF è™•ç†ä¾è³´ï¼ˆå¿…é ˆï¼‰
- PyMuPDF>=1.23.0

### Python æ¨™æº–åº«ï¼ˆç„¡éœ€å®‰è£ï¼‰
- os, gc, re, traceback, atexit, tempfile, uuid, sys, time
- pathlib, datetime, threading, io, base64, multiprocessing, queue, zipfile, shutil

## âœ… æª¢æŸ¥æ¸…å–®

- [ ] Python 3.11+ å·²å®‰è£
- [ ] è™›æ“¬ç’°å¢ƒå·²å‰µå»ºä¸¦æ¿€æ´»
- [ ] requirements.txt å·²ä¿®æ­£ï¼ˆç§»é™¤é‡è¤‡é …ï¼Œæ·»åŠ ç¼ºå¤±é …ï¼‰
- [ ] æ‰€æœ‰ä¾è³´å·²å®‰è£
- [ ] ä¾è³´é©—è­‰é€šé
- [ ] æ‡‰ç”¨å¯ä»¥æ­£å¸¸å•Ÿå‹•
- [ ] Web ç•Œé¢å¯ä»¥è¨ªå•
- [ ] API ç«¯é»éŸ¿æ‡‰æ­£å¸¸

## ğŸ”„ ä¸‹ä¸€æ­¥è¡Œå‹•

1. **ç«‹å³ä¿®æ­£ requirements.txt**ï¼š
   - ç§»é™¤é‡è¤‡é …
   - æ·»åŠ  opencv-python å’Œ numpy

2. **é‡æ–°å®‰è£ä¾è³´**ï¼š
   ```bash
   pip install -r requirements.txt
   ```

3. **é©—è­‰å®‰è£**ï¼š
   ```bash
   python3 -c "import cv2, numpy; print('All dependencies OK')"
   ```

4. **æ¸¬è©¦å•Ÿå‹•**ï¼š
   ```bash
   python3 app.py
   ```

