# 🖥️ MLX DeepSeek-OCR 系統支援說明

## ❌ 當前版本：**不是 Linux 版本**

### 📋 系統支援情況

| 作業系統 | 支援狀態 | 說明 |
|---------|---------|------|
| **macOS (Apple Silicon)** | ✅ **完全支援** | M1/M2/M3/M4 晶片，最佳性能 |
| **macOS (Intel)** | ⚠️ **部分支援** | 可能性能較差 |
| **Linux** | ❌ **不支援** | MLX 框架不支援 Linux |
| **Windows** | ❌ **不支援** | MLX 框架不支援 Windows |

---

## 🔍 為什麼不是 Linux 版本？

### 1. MLX 框架限制

當前專案使用 **MLX 框架**（`mlx-vlm`），這是 Apple 專為 macOS 開發的框架：

```python
import mlx.core as mx
from mlx_vlm import load, generate
```

**MLX 框架特點：**
- ✅ 專為 macOS Apple Silicon 設計
- ✅ 需要 Metal 後端支援（macOS 專用 GPU API）
- ❌ **不支援 Linux**
- ❌ **不支援 Windows**

### 2. 即使 CPU 模式也需要 macOS

雖然代碼中設置了 CPU 模式：

```python
os.environ['MLX_USE_CPU'] = '1'
os.environ['METAL_DEVICE_WRAPPER_TYPE'] = '1'
```

但這**只是禁用 GPU 加速**，MLX 框架本身仍然需要：
- macOS 作業系統
- Metal 框架支援（即使不使用 GPU）

---

## 🔄 如果要支援 Linux，需要做什麼？

### 方案 1：使用官方 DeepSeek-OCR（PyTorch 版本）

官方 DeepSeek-OCR 支援 Linux，但使用不同的技術棧：

**官方版本技術棧：**
- PyTorch（而非 MLX）
- CUDA（NVIDIA GPU）
- 支援 Linux/Windows/macOS

**安裝方式：**
```bash
# 官方版本（Linux 支援）
git clone https://github.com/deepseek-ai/DeepSeek-OCR.git
cd DeepSeek-OCR
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118
```

### 方案 2：重寫為 PyTorch 版本

如果要讓當前專案支援 Linux，需要：
1. ❌ 移除 MLX 相關代碼
2. ✅ 改用 PyTorch 作為推理引擎
3. ✅ 重寫模型加載和推理邏輯
4. ✅ 更新 requirements.txt

**工作量：** 需要大量代碼重寫

---

## 📊 當前版本詳細說明

### 技術棧
```
當前版本技術棧：
├── MLX 框架（Apple 專用）
│   ├── mlx>=0.20.0
│   └── mlx-vlm==0.3.5
├── Flask（Web 框架）
├── Pillow（圖像處理）
├── OpenCV（圖像處理）
└── PyMuPDF（PDF 處理）
```

### 運行模式
- **CPU 模式**：`MLX_USE_CPU=1`（禁用 GPU，但仍需 macOS）
- **GPU 模式**：使用 Metal GPU（僅 macOS Apple Silicon）

---

## ✅ 確認當前系統

### 檢查是否為 macOS

```bash
# 檢查作業系統
uname -a

# macOS 會顯示類似：
# Darwin ... arm64  # Apple Silicon
# Darwin ... x86_64 # Intel Mac
```

### 檢查 MLX 是否可用

```bash
python3 -c "import mlx.core as mx; print('✅ MLX 可用')"
```

**如果在 Linux 上執行：**
```
❌ ModuleNotFoundError: No module named 'mlx'
```

---

## 🎯 總結

| 項目 | 狀態 |
|------|------|
| **當前版本** | macOS 專用版本 |
| **Linux 支援** | ❌ 不支援 |
| **MLX 框架** | 僅支援 macOS |
| **CPU 模式** | 仍需 macOS 環境 |
| **如需 Linux** | 需使用官方 PyTorch 版本或重寫代碼 |

---

## 💡 建議

### 如果您需要在 Linux 上運行：

1. **使用官方 DeepSeek-OCR**
   - 支援 Linux
   - 使用 PyTorch + CUDA
   - 需要 NVIDIA GPU（推薦）

2. **或考慮其他 OCR 方案**
   - PaddleOCR（支援 Linux）
   - EasyOCR（支援 Linux）
   - Tesseract OCR（跨平台）

### 如果您在 macOS 上：

✅ **當前版本完全適用**，直接使用即可！

---

## 📝 相關文件

- `DEPLOYMENT_GUIDE.md` - 部署指南（明確說明 Linux 不支援）
- `INSTALLATION_STEPS.md` - 安裝步驟（macOS 專用）
- `安裝啟用指南.md` - 快速安裝指南

---

**結論：當前版本是 macOS 專用版本，不支援 Linux。如需 Linux 支援，請使用官方 PyTorch 版本的 DeepSeek-OCR。**

